<?php

declare(strict_types=1);

describe('Character Sequence Recovery Tests', function (): void {
    it('handles various character sequences', function (string $template): void {
        $doc = $this->parse($template);
        expect($doc->render())->toBe($template);
    })->with([
        '{{{{',
        '}}}}',
        '{{}}',
        '}{',
        '{{}}{{}}'.'{{}}',
        '{{ "{" }}',
        '{{ "}" }}',
        '{{ "{{}}" }}',
        '{!! "{" !!}',
        '@@',
        '@@@',
        '@@@@',
        '@@ @if',
        '@@@if',
        'email@example.com',
        '@@if($x)',
        '@{{ $x }}',
        '@@{{ $x }}',
        '<<',
        '>>',
        '<>',
        '><',
        '<<<',
        '>>>',
        '< >',
        '> <',
        '<div<<span>',
        '<div>><span>',
        '<?',
        '?>',
        '<??>',
        '?><?',
        '<??php',
        '<?php ?>?>',
        '{{ $x ?? $y }}',
        '{{ $a ?: $b }}',
        '{!',
        '!}',
        '{!!}',
        '{!!!}',
        '{!!!!}',
        '<!',
        '<!-',
        '<!-->',
        '<![',
        '<![CDATA[',
        '{{-',
        '{{--',
        '{{---',
        '--}}',
        '---}}',
        '{{----}}',
        '<!-',
        '<!--',
        '--->',
        '<!---->',
    ]);
});
